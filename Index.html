<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AbrDiary - Diary Sederhana</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        form { margin-bottom: 20px; }
        input, textarea { width: 100%; margin-bottom: 10px; padding: 8px; }
        button { padding: 10px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        .entry { border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; }
        .tags { font-style: italic; color: gray; }
        .delete-btn { background: #f44336; color: white; padding: 5px; cursor: pointer; }
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js"></script>
</head>
<body>
    <h1>AbrDiary</h1>
    <form id="diaryForm">
        <input type="text" id="title" placeholder="Judul Diary" required>
        <textarea id="content" placeholder="Isi Diary" required></textarea>
        <input type="text" id="tags" placeholder="Tag (pisah dengan koma, misal: senang,libur)">
        <button type="submit">Simpan Diary</button>
    </form>
    <h2>Daftar Diary</h2>
    <div id="diaryList"></div>

    <script>
        // Ganti dengan config Firebase milikmu
        const firebaseConfig = {
  apiKey: "AIzaSyBSxNZ-L2fQfFoM6vWZnR2SkMoSTArQFhA",
  authDomain: "abrdiary-cf4a5.firebaseapp.com",
  databaseURL: "https://abrdiary-cf4a5-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "abrdiary-cf4a5",
  storageBucket: "abrdiary-cf4a5.firebasestorage.app",
  messagingSenderId: "478592228650",
  appId: "1:478592228650:web:48c7e3ffe9ab6f96a41253"
};

        // Inisialisasi Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const diaryRef = database.ref('diaries'); // Nama node database: 'diaries'

        // Fungsi tambah diary
        document.getElementById('diaryForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;
            const tags = document.getElementById('tags').value.split(',').map(tag => tag.trim());
            diaryRef.push({ title, content, tags, timestamp: Date.now() });
            document.getElementById('diaryForm').reset();
        });

        // Tampilkan list diary
        diaryRef.on('value', (snapshot) => {
            const diaryList = document.getElementById('diaryList');
            diaryList.innerHTML = '';
            snapshot.forEach((childSnapshot) => {
                const data = childSnapshot.val();
                const key = childSnapshot.key;
                const entry = document.createElement('div');
                entry.classList.add('entry');
                entry.innerHTML = `
                    <h3>${data.title}</h3>
                    <p>${data.content}</p>
                    <p class="tags">Tag: ${data.tags.join(', ')}</p>
                    <button class="delete-btn" onclick="deleteEntry('${key}')">Hapus</button>
                `;
                diaryList.appendChild(entry);
            });
        });

        // Fungsi hapus entry
        function deleteEntry(key) {
            diaryRef.child(key).remove();
        }
    </script>
</body>
</html>
